!function(e){var t={};function o(n){if(t[n])return t[n].exports;var l=t[n]={i:n,l:!1,exports:{}};return e[n].call(l.exports,l,l.exports,o),l.l=!0,l.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)o.d(n,l,function(t){return e[t]}.bind(null,l));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t){document.getElementById("postcodeFind").addEventListener("click",function(e){e.preventDefault();let t=document.getElementById("postcode").value;fetch("https://api.postcodes.io/postcodes/"+t+"/validate").then(e=>e.json()).then(e=>{if(1!=e.result)return console.log(e.result),void console.log("invalid postcode");console.log(e.result),function(e){fetch("https://api.postcodes.io/postcodes/"+e).then(e=>e.json()).then(e=>{document.getElementById("foundLocation").innerHTML="Today's level for "+e.result.nuts+":";e.result.latitude,e.result.longitude;let t=e.result.latitude+","+e.result.longitude;console.log(t),function(e){let t="https://cors-anywhere.herokuapp.com/https://socialpollencount.co.uk/api/forecast?location=["+e+"]";console.log(t),fetch(t,{method:"GET"}).then(e=>e.json()).then(e=>{console.log(e);e.forecast.forEach(function(e){e.date.contains(o)&&(console.log("todays reading found"),console.log(e.pollen_count),document.getElementById("levelText").innerHTML=e.pollen_count,document.getElementById("levelText").classList.add("fadeInUp"))})}).catch(e=>console.log(e))}(t)}).catch(e=>{console.log(e)})}(t)}).catch(e=>{console.log("error: "+e)})});var o=(new Date).toISOString().substr(0,10);String.prototype.contains||(String.prototype.contains=function(){return-1!==String.prototype.indexOf.apply(this,arguments)})}]);